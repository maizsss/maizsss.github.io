<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    <title>前端错误监控平台的搭建 | maizsss blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="">
    <meta name="description" content="前端错误监控系统的搭建前端错误监控是什么 把错误日志打点到系统，系统提供日志数据可视化便于分析与定位问题。也可以称为日志分析平台。 ELK是常用的日志分析平台，ELK是ElasticSearch、Logstash和Kiabana三个开源工具的简称，分别提供搜索、存储、可视化功能。具体可参考一篇文章:戳这里。 针对前端的监控有多种，“应用错误”、“代码级别错误”、“性能”、“用户行为”，这次主要从“">
<meta property="og:type" content="article">
<meta property="og:title" content="前端错误监控平台的搭建">
<meta property="og:url" content="http://maizsss.github.io/2017/12/06/前端错误监控平台的搭建/index.html">
<meta property="og:site_name" content="maizsss blog">
<meta property="og:description" content="前端错误监控系统的搭建前端错误监控是什么 把错误日志打点到系统，系统提供日志数据可视化便于分析与定位问题。也可以称为日志分析平台。 ELK是常用的日志分析平台，ELK是ElasticSearch、Logstash和Kiabana三个开源工具的简称，分别提供搜索、存储、可视化功能。具体可参考一篇文章:戳这里。 针对前端的监控有多种，“应用错误”、“代码级别错误”、“性能”、“用户行为”，这次主要从“">
<meta property="og:image" content="http://7xpsli.com1.z0.glb.clouddn.com/feerror_share_pic1.png">
<meta property="og:image" content="http://7xpsli.com1.z0.glb.clouddn.com/feerror_share_pic2.png">
<meta property="og:image" content="http://7xpsli.com1.z0.glb.clouddn.com/feerror_share_pic3.png">
<meta property="og:image" content="http://7xpsli.com1.z0.glb.clouddn.com/feerror_share_pic4.png">
<meta property="og:image" content="http://7xpsli.com1.z0.glb.clouddn.com/feerror_share_pic5.png">
<meta property="og:updated_time" content="2017-12-06T10:26:19.330Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="前端错误监控平台的搭建">
<meta name="twitter:description" content="前端错误监控系统的搭建前端错误监控是什么 把错误日志打点到系统，系统提供日志数据可视化便于分析与定位问题。也可以称为日志分析平台。 ELK是常用的日志分析平台，ELK是ElasticSearch、Logstash和Kiabana三个开源工具的简称，分别提供搜索、存储、可视化功能。具体可参考一篇文章:戳这里。 针对前端的监控有多种，“应用错误”、“代码级别错误”、“性能”、“用户行为”，这次主要从“">
<meta name="twitter:image" content="http://7xpsli.com1.z0.glb.clouddn.com/feerror_share_pic1.png">
    
        <link rel="alternate" type="application/atom+xml" title="maizsss blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu"  >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">maizsss</h5>
          <a href="mailto:413750188@qq.com" title="413750188@qq.com" class="mail">413750188@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">前端错误监控平台的搭建</div>
        
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">前端错误监控平台的搭建</h1>
        <h5 class="subtitle">
            
                <time datetime="2017-12-06T10:25:10.000Z" itemprop="datePublished" class="page-time">
  2017-12-06
</time>


            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#前端错误监控系统的搭建"><span class="post-toc-text">前端错误监控系统的搭建</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#前端错误监控是什么"><span class="post-toc-text">前端错误监控是什么</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#最小化的需求"><span class="post-toc-text">最小化的需求</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#监控系统如何实现"><span class="post-toc-text">监控系统如何实现</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#具体实现"><span class="post-toc-text">具体实现</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#管理端"><span class="post-toc-text">管理端</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#服务端"><span class="post-toc-text">服务端</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#待扩展"><span class="post-toc-text">待扩展</span></a></li></ol></li></ol>
        </nav>
    </aside>
    
<article id="post-前端错误监控平台的搭建"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">前端错误监控平台的搭建</h1>
        <div class="post-meta">
            <time class="post-time" title="2017-12-06 18:25:10" datetime="2017-12-06T10:25:10.000Z"  itemprop="datePublished">2017-12-06</time>

            


            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="前端错误监控系统的搭建"><a href="#前端错误监控系统的搭建" class="headerlink" title="前端错误监控系统的搭建"></a>前端错误监控系统的搭建</h1><h2 id="前端错误监控是什么"><a href="#前端错误监控是什么" class="headerlink" title="前端错误监控是什么"></a>前端错误监控是什么</h2><ul>
<li>把错误日志打点到系统，系统提供日志数据可视化便于分析与定位问题。也可以称为日志分析平台。</li>
<li>ELK是常用的日志分析平台，ELK是ElasticSearch、Logstash和Kiabana三个开源工具的简称，分别提供搜索、存储、可视化功能。具体可参考一篇文章:<a href="https://my.oschina.net/itblog/blog/547250" target="_blank" rel="external">戳这里</a>。</li>
<li>针对前端的监控有多种，“应用错误”、“代码级别错误”、“性能”、“用户行为”，这次主要从“代码级别错误”来展开讨论。</li>
</ul>
<h2 id="最小化的需求"><a href="#最小化的需求" class="headerlink" title="最小化的需求"></a>最小化的需求</h2><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://7xpsli.com1.z0.glb.clouddn.com/feerror_share_pic1.png" alt="image" title="">
                </div>
                <div class="image-caption">image</div>
            </figure>
<h2 id="监控系统如何实现"><a href="#监控系统如何实现" class="headerlink" title="监控系统如何实现"></a>监控系统如何实现</h2><ul>
<li>从需求上考虑，无必要搭建如ELK这样庞大的系统，有点杀鸡用牛刀的节奏。在一定应用群规模以内，可以把日志系统简单理解为一个能读写数据库的服务，加上其他辅助手段(定时任务、发消息套件)就能整合成一套可用、灵活、方便扩展的系统。</li>
<li>系统用前后分离的方式实现，罗列一下主要的技术。前端：vue、element-ui、echarts，服务端：nodejs7.6+<a href="http://koa.bootcss.com/#" target="_blank" rel="external">koa2</a>、db：mysql、orm: <a href="https://itbilu.com/nodejs/npm/VkYIaRPz-.html" target="_blank" rel="external">Sequelize</a>、nodejs守护进程：<a href="https://www.npmjs.com/package/pm2" target="_blank" rel="external">pm2</a></li>
<li>系统架构图： <figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://7xpsli.com1.z0.glb.clouddn.com/feerror_share_pic2.png" alt="image" title="">
                </div>
                <div class="image-caption">image</div>
            </figure></li>
<li>选择从零开始搭建一套系统，另一方面也是为了自己实践一下服务端开发领域上面的技术。有了上述方案以后，掌握一定服务端技术的人其实已经能知道具体采用什么技术手段、如何去实现。我自己在实现功能过程中，也有过很多考虑，也踩过一些坑。</li>
</ul>
<h2 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h2><ul>
<li>业务端的埋点捕获不多说了，在<a href="https://maizsss.github.io/2017/11/01/vue%E9%A1%B9%E7%9B%AE%E7%9A%84%E9%94%99%E8%AF%AF%E6%8D%95%E8%8E%B7%E6%96%B9%E5%BC%8F/">这篇文章</a>有较为详细的说明，延伸到其他技术栈也是同样的思路。</li>
</ul>
<h3 id="管理端"><a href="#管理端" class="headerlink" title="管理端"></a>管理端</h3><ul>
<li>后台管理界面天然适合做成SPA，利用vue实现组件化开发，工作流上配合webpack进行一系列的工程化处理，可以十分快速地构建起一个前端应用。</li>
<li>UI框架上面，<a href="http://element-cn.eleme.io/1.4/#/zh-CN" target="_blank" rel="external">element-ui</a>在之前的一些后台系统上面有过实践，这次为了图方便也选用了同样的。element-ui由国内饿了么团队开源，有vue、react版本，vue版本相对支持力度大，目前已经更新到2.0版本，而项目中用到的是1.4.X版本，这个版本官方维护到这年12月份。element-ui的文档友好，在github的issue回应也及时，UI组件能满足大多数业务常用需求。属于国内基于vue的UI组件库中较领先的。</li>
<li>另外值得一提的是在基于react的UI库中，由阿里开源的<a href="https://ant.design/docs/react/introduce-cn" target="_blank" rel="external">ant-design</a>是个十分大而全的技术，UI设计上面也更简洁紧凑（提供了一套管理系统的设计规范），组件、功能更加丰富，提供一站式应用架构，可以短时间内就能把最小应用搭建起来。</li>
<li>在实现一些小规模的数据可视化需求中，国内<a href="http://echarts.baidu.com/examples.html" target="_blank" rel="external">echarts</a>的出现频率很高，较大规模的需求可能就要选择<a href="https://www.hcharts.cn/demo/highcharts" target="_blank" rel="external">highcharts</a>，毕竟后者起步早，背后团队力量大，文档还详细易懂。两者都是以全配置的方式驱动，每种常用的图表官方或社区都有对应的例子参考。但如果有特殊需求就要花点时间翻阅长溜溜的配置文档。在配置驱动这个点上延伸想象，可以编写数据过滤器来实现图表的复用，快速消化基本的<a href="http://datacenter.linghit.com/#/crowdPortrait" target="_blank" rel="external">数据可视化</a>需求。</li>
</ul>
<h3 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h3><ul>
<li>为了能让系统能在短时间内运行起来，加上自己在服务端开发上涉足还浅，服务端选择的技术相对保守。市面上有整套的服务端解决方案，如<a href="http://eggjs.org/zh-cn/tutorials/index.html" target="_blank" rel="external">eggjs</a>、<a href="https://thinkjs.org/doc/index.html" target="_blank" rel="external">thinkjs</a>，这类框架已经把service、日志、进程管理、定时任务、部署等都囊括了，最后并没有选用这些技术。npm庞大的生态，让我不需要担心功能的实现，每块领域都有优秀的npm包来解决。</li>
<li><a href="http://koa.bootcss.com/#" target="_blank" rel="external">Koa</a>的使用需要理解中间件与context（上下文）的概念，但其实express也一样，只是koa对express而言是承接的关系，koa是面向未来的web框架。<blockquote>
<p>Koa是一个轻量级的、极富表现力的http开发框架。<br>一个web request会通过Koa的中间件栈，来动态完成response的处理。<br>同时，Koa2采用了async和await的语法来增强中间件的表现力。<br>Koa本身做的工作仅仅是定制了中间件的编写规范，而不内置任何中间件。</p>
</blockquote>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">// 伪代码，捕获路由间抛出的错误日志。</div><div class="line">async function logger(ctx, next) &#123;</div><div class="line">    try &#123;</div><div class="line">        await next();</div><div class="line">    &#125; catch (error) &#123;</div><div class="line">        //记录异常日志</div><div class="line">        console.error(moment().format(&apos;YYYY-MM-DD HH:mm:ss&apos;), &apos;, errorMsg:&apos;, JSON.stringify(formatLog(&#123;ctx, msg: error.toString()&#125;)));</div><div class="line">    &#125;</div><div class="line">&#125; </div><div class="line">router.all(</div><div class="line">    &apos;*&apos;,</div><div class="line">    logger</div><div class="line">);</div></pre></td></tr></table></figure>
<ul>
<li>pm2会把应用内的console输出作为日志，以上代码简单利用了这点做了简单的日志服务，另外配合定时任务按天分割日志、清除N天前的日志文件。pm2作为node的进程管理包是主流选择，它支持负载均衡（node cluster），0秒重载等，还能支持配置启动。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">apps : [</div><div class="line">    &#123;</div><div class="line">      name      : &apos;linghit_fe&apos;,</div><div class="line">      script    : &apos;bin/www&apos;,</div><div class="line">      log_file  : &quot;./logs/pm2-log.log&quot;,</div><div class="line">      out_file  : &quot;./logs/pm2-out.log&quot;,</div><div class="line">      error_file : &quot;./logs/pm2-error.log&quot;,</div><div class="line">      pid_file: &quot;./logs/pm2-linghit_fe.pid&quot;,</div><div class="line">      merge_logs : true,</div><div class="line">      log_date_format : &quot;YYYY-MM-DD HH:mm:SS&quot;,</div><div class="line">      max_memory_restart: &quot;150M&quot;,</div><div class="line">      instances  : 2,</div><div class="line">      exec_mode  : &quot;cluster&quot;,</div><div class="line">      env: &#123;</div><div class="line">        COMMON_VARIABLE: &apos;true&apos;</div><div class="line">      &#125;,</div><div class="line">      env_production : &#123;</div><div class="line">        NODE_ENV: &apos;production&apos;</div><div class="line">      &#125;,</div><div class="line">      env_development : &#123;</div><div class="line">        NODE_ENV: &apos;development&apos;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">]</div></pre></td></tr></table></figure>
<ul>
<li>pm2能以cluster的方式启动应用，充分发挥多核cpu的性能，本身是利用了node的cluster集群模块。在这个监控应用上，我开启了两个web进程（linghit_fe）,与其他的辅助进行，linghit_fe_logmaster用于管理日志，linghit_fe_task用于管理定时任务。再往深一点的主子进程控制，数据共享等还要继续学习深化。<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://7xpsli.com1.z0.glb.clouddn.com/feerror_share_pic3.png" alt="image" title="">
                </div>
                <div class="image-caption">image</div>
            </figure></li>
<li>Sequelize作为一个mysql的orm包，能简化大量的数据库操作，通过定义model与数据表建立映射关系，在这之后的数据库操作都是方便、可靠的。Sequelize基于Promise实现异步流程控制，也能与async await很好配合使用。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">const modelA = sequelize.define(&apos;modelName&apos;, &#123;</div><div class="line">    columnA: &#123;</div><div class="line">        type: Sequelize.BOOLEAN,</div><div class="line">        validate: &#123;</div><div class="line">          is: [&quot;[a-z]&quot;,&apos;i&apos;],        // will only allow letters</div><div class="line">          max: 23,                  // only allow values &lt;= 23</div><div class="line">          isIn: &#123;</div><div class="line">            args: [[&apos;en&apos;, &apos;zh&apos;]],</div><div class="line">            msg: &quot;Must be English or Chinese&quot;</div><div class="line">          &#125;</div><div class="line">        &#125;,</div><div class="line">        field: &apos;column_a&apos;</div><div class="line">        // Other attributes here</div><div class="line">    &#125;,</div><div class="line">    columnB: Sequelize.STRING</div><div class="line">&#125;)</div><div class="line">sequelize.sync();</div><div class="line">await modelA.findAndCountAll(&#123;</div><div class="line">	where: whereQuery,</div><div class="line">	offset: per_page * (current - 1),</div><div class="line">	limit: per_page,</div><div class="line">	order: [[&apos;create_time&apos;, &apos;DESC&apos;]]</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<ul>
<li>报警机制，定时任务+方糖。<br><img src="http://7xpsli.com1.z0.glb.clouddn.com/feerror_share_pic4.png" alt="image"></li>
<li>路由管理。引用了koa-router包，<a href="https://www.npmjs.com/package/koa-router" target="_blank" rel="external">使用方式</a>。在这套代码里我设计成集中管理的模式，集中在一处能看到整个应用的路由关系，避免随着业务扩展而逻辑凌乱路由分散。具体看码。</li>
<li>使用loadtest进行简单的压力测试，目前能稳定在每秒100请求下。到了120以上开始内存上涨，延时增加，但服务还没崩。150以上开始出现极大延时，大量请求超时，吞吐量下降。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">var loadtest = require(&apos;loadtest&apos;);</div><div class="line">var options = &#123;</div><div class="line">    url: url,</div><div class="line">    method: &apos;GET&apos;,</div><div class="line">    // maxRequests: 1000,</div><div class="line">    requestsPerSecond: 100,</div><div class="line">    concurrency: 20,</div><div class="line">    statusCallback: function (error, result, latency) &#123;</div><div class="line">	    console.log(&apos;总请求量： %j,错误： %j，rps： %j，延时：%j ms &apos;, latency.totalRequests, latency.totalErrors, latency.rps, latency.meanLatencyMs);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loadtest.loadTest(options, function(error, result)</div><div class="line">&#123;</div><div class="line">    if (error)</div><div class="line">    &#123;</div><div class="line">        return console.error(&apos;Got an error: %s&apos;, error);</div><div class="line">    &#125;</div><div class="line">    console.log(&apos;Tests run successfully&apos;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="待扩展"><a href="#待扩展" class="headerlink" title="待扩展"></a>待扩展</h2><ul>
<li>统计数据的查询。根据传参判断，大于72小时的以小时为单位，其余以分钟为单位。查询语句上先以create_time（时间戳）用FROM_UNIXTIME格式化成对应的sqlFormat格式，在此基础上（date_format）分组查询做出统计。有没有更好的查询办法让统计粒度更自由？比如按10分钟，30分钟，天。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">// 定义时段分割，小于1小时的以分钟为分割单位</div><div class="line">let timeSplit = (countQuery.create_time.$lt - countQuery.create_time.$gt) &gt;= (72 * 60 * 60) ? &#123;</div><div class="line">	unit: 60 * 60,</div><div class="line">	sqlFormat: &apos;%Y-%m-%e %H:00&apos;,</div><div class="line">	momentFormat: &apos;YYYY-MM-D HH:00&apos;</div><div class="line">&#125; : &#123;</div><div class="line">	unit: 60,</div><div class="line">	sqlFormat: &apos;%Y-%m-%e %H:%i&apos;,</div><div class="line">	momentFormat: &apos;YYYY-MM-D HH:mm&apos;</div><div class="line">&#125;;</div><div class="line">// 查询</div><div class="line">let queryCount = await db[modelName].count(&#123;</div><div class="line">	where: countQuery,</div><div class="line">	order: [&apos;create_time&apos;, &apos;ASC&apos;],</div><div class="line">	attributes: [</div><div class="line">		[db.sequelize.fn(&apos;FROM_UNIXTIME&apos;, db.sequelize.col(&apos;create_time&apos;), timeSplit.sqlFormat), &apos;date_format&apos;]</div><div class="line">	],</div><div class="line">	group: &apos;date_format&apos;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<ul>
<li>用户模块、权限模块。在系统内部就可以管理不同项目接收报警信息的人，而不需要通过方糖扫码。<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://7xpsli.com1.z0.glb.clouddn.com/feerror_share_pic5.png" alt="image" title="">
                </div>
                <div class="image-caption">image</div>
            </figure></li>
<li>APM模块。页面性能分析，浏览器分布分析。</li>
<li>页面巡航模块。利用<a href="https://maizsss.github.io/2017/10/28/%E5%89%8D%E7%AB%AF%E7%9A%84UI%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/">UI自动化测试</a>定时跑测试脚本，监控各个页面的实际情况。</li>
<li>大数据量的解决方案？目前定时(1个月)清理db。</li>
<li>防刷、防攻击手段？？？</li>
<li>nginx实现的多机集群均衡负载？？？（单机都还要省着用，还多机?）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">upstream XXX.XXX.com &#123;  </div><div class="line">    server 123.456.789.111:7082;  </div><div class="line">    server 123.456.789.222:7082;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>还有什么使用上面的优化？？</li>
</ul>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2017-12-06T10:26:19.330Z" itemprop="dateUpdated">2017-12-06 18:26:19</time>
</span><br>


        
    </div>
    <footer>
        <a href="http://maizsss.github.io">
            <img src="/img/avatar.jpg" alt="maizsss">
            maizsss
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            

            


        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2017/12/12/Web性能优化/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Web性能优化</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2017/11/01/vue项目的错误捕获方式/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">vue项目的错误捕获方式</h4>
      </a>
    </div>
  
</nav>



    











</article>



</div>

        <footer class="footer">
    <!-- <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>This blog is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</span>
        </p>
    </div> -->
    <div class="bottom">
        <p><span>maizsss &copy; 2015 - 2018</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>


    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: false, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>






<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '额~~~~';
            clearTimeout(titleTime);
        } else {
            document.title = 'maizsss blog';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
